---
# use firewalld as it is supported by ansible <=2.0
# run this role before using firewalld
#  to avoid issue https://github.com/ansible/ansible-modules-extras/issues/128

- name: install universe repository for firewalld
  apt_repository:
    repo: "{{item}}"
  register: multiverse_installed
  when: ansible_distribution == 'Ubuntu'
  with_items:
    - 'deb http://archive.ubuntu.com/ubuntu {{ansible_distribution_release}} universe'

- name: install firewalld
  action: "{{ ansible_pkg_mgr }} state=installed name=firewalld"

- name: install missing packackage on fedoras
  action: "{{ ansible_pkg_mgr }} state=installed name=python-firewall"
  #when:  ( ansible_distribution == "Fedora" )

- name: start firewall
  service: name=firewalld enabled=yes state=started

